local dir

# Couldn't make this to work:
# local excludes
# excludes=(.git .svn)
# ${(j:|:)excludes}

if [[ -n $1 ]]
then
   dir=$(print -l $1/(^.(git|svn)/)#^.(git|svn)(D/) | fzf -0 +m)
else
   # (^.git/)# is equivalent to ^.git/ zero or more times so:
   #  ^.git/^.git/^.git/^.git/
   dir=$(print -l (^.(git|svn)/)#^.(git|svn)(D/) | fzf -0 +m)
fi

[[ -d $dir ]] && cd $dir
