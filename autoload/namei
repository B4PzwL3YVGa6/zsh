# namei command for Mac OS

if [[ $(uname) != Darwin && $+commands[namei] ]]
then
   command namei $@
else
   local o

   for o in $@
   do
      [[ $o == -* ]] && shift
   done

   local inode
   local inodes

   inode=$1
   inodes=(${(s./.)inode})

   local i ii

   stat -c '%A %U %G %n' /
   for i in $inodes
   do
      ii=$ii/$i
      stat --printf '%A %U %G' $ii
      print -l " ${ii##*/}"
   done
fi
